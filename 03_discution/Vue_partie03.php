<?php
  /*
  - Nom du fichier : Vue_partie03.php 
  - Type : vue
  - Language(s) : HTML / PHP

  LES ATTRIBUTS/VALEURS DES BALISES SERONT ORGANISE DE LA FACON SUIVANTE :
    <... id="" class="" data-...="" value="" name="" style="" --DIVERS-- >

  */
?>        

  <!-- PARTIE 01 ==> --------------------------------------------------------------------------------------------------------------------------------------------------------------------- CORP ==> -->
    <div id="" class="Discution" data-vide="" value="" name="" style="display:none;">
      <div id="" class="P3_containerprinc" data-vide="" value="" name="" >
        <div id="P3_msn-messenger-window" class="P3_msn-messenger-window" data-vide="" value="" name="" >
          <div id="P3_shakeButton" class="P3_container" data-vide="" value="" name="" >

          <!-- PARTIE 01 01 ==> -------------------------------------------------------------------------------------------------------------------------------------------------- MENU GENERAL ==> -->
            <div id="" class="P3_msn-messenger-toolbar" data-vide="" value="" name="" >
              <div id="" class="P3_container" data-vide="" value="" name="" >
                <div id="" class="P3_toolbar-container" data-vide="" value="" name="" >
                  <div id="" class="P3_image-circular-button P3_up-down" data-vide="" value="" name="" >
                    <div id="" class="P3_container" data-vide="" value="" name="" >
                      <img id="" class="" data-vide="" value="" name=""  src="../bibliotheque/03_discution/icones/small-up-down.png" alt="up/down">
                    </div>
                  </div>
                  <div id="" class="P3_image-button P3_invite" data-vide="" value="" name="" >
                      <div id="" class="P3_container" data-vide="" value="" name="" >
                          <a id="" class="" data-vide="" value="" name=""  href="https://discord.com/" target="_blank">
                              <img id="" class="P3_iconeMenuPrincipal" data-vide="" value="" name=""  src="../bibliotheque/03_discution/icones/invite.png" alt="Invite">
                              <div id="" class="P3_text" data-vide="" value="" name="">inviter</div>
                          </a>
                      </div>
                  </div>
                  <div id="" class="P3_image-button P3_send" data-vide="" value="" name="" >
                    <div id="" class="P3_container" data-vide="" value="" name="" >
                      <a id="" class="" data-vide="" value="" name=""  href="https://www.pinterest.fr/" target="_blank">
                          <img id="" class="P3_iconeMenuPrincipal" data-vide="" value="" name=""  src="../bibliotheque/03_discution/icones/send.png" alt="envoyer">
                          <div id="" class="P3_text" data-vide="" value="" name="" >envoyer</div>
                      </a>
                    </div>
                  </div> 
                  <div id="" class="P3_image-button P3_video" data-vide="" value="" name="">
                    <div id="" class="P3_container" data-vide="" value="" name="">
                      <a id="" class="" data-vide="" value="" name="" href="https://www.youtube.com/" target="_blank">
                          <img id="" class="P3_iconeMenuPrincipal" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/video.png" alt="vidéo">
                          <div id="" class="P3_text" data-vide="" value="" name="">video</div>
                      </a>
                    </div>
                  </div>
                  <div id="" class="P3_image-button P3_voice" data-vide="" value="" name="">
                    <div id="" class="P3_container" data-vide="" value="" name="">
                      <a id="" class="" data-vide="" value="" name="" href="https://www.teamspeak.com/fr/" target="_blank">
                          <img id="" class="P3_iconeMenuPrincipal" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/voice.png" alt="parler">
                          <div id="" class="P3_text" data-vide="" value="" name="">parler</div>
                      </a>
                    </div>
                  </div>
                  <div id="" class="P3_image-button P3_activities" data-vide="" value="" name="">
                    <div id="" class="P3_container" data-vide="" value="" name="">
                      <a id="" class="" data-vide="" value="" name="" href="https://www.deezer.com/fr/" target="_blank">
                        <img id="" class="P3_iconeMenuPrincipal" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/activities.png" alt="activités">
                        <div id="" class="P3_text" data-vide="" value="" name="">activités</div>
                      </a>
                    </div>
                  </div>
                  <div id="" class="P3_image-button P3_games" data-vide="" value="" name="">
                    <div id="" class="P3_container" data-vide="" value="" name="">
                      <a id="" class="" data-vide="" value="" name="" href="https://gaming.amazon.com/intro" target="_blank">
                        <img id="" class="P3_iconeMenuPrincipal" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/games.png" alt="jeux">
                        <div id="" class="P3_text" data-vide="" value="" name="">jeux</div>
                      </a>
                    </div>
                  </div>
                </div>
                <div id="" class="P3_toolbar-small-container" data-vide="" value="" name="">
                  <div id="" class="P3_left" data-vide="" value="" name=""></div>
                  <div id="" class="P3_center" data-vide="" value="" name="">
                    <div id="" class="P3_buttons" data-vide="" value="" name="">
                      <div id="" class="P3_image-circular-button P3_block" data-vide="" value="" name="">
                        <div id="" class="P3_container" data-vide="" value="" name="">
                          <img id="DiscutionButton" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/small-block.png" alt="bloquer">
                        </div>
                      </div>
                      <div  id="" class="P3_image-circular-button P3_paint" data-vide="" value="" name="">
                        <div id="" class="P3_container" data-vide="" value="" name="">
                          <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/small-paint.png" alt="dessin">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="" class="P3_right" data-vide="" value="" name=""></div>
                  <div id="blocquitter" class="P3_end" data-vide="" value="" name="">
                    <a href="index.php" id="quitter"><img  class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/allumer.png" style="height: 15px;"></a>
                  </div>
                </div>
              </div>
            </div>
          <!-- <== PARTIE 01 01 -------------------------------------------------------------------------------------------------------------------------------------------------- <== MENU GENERAL -->

          <!-- PARTIE 01 02 ==> ----------------------------------------------------------------------------------------------------------------------------- DESTINATAIRE / HISTORIQUE MESSAGE ==> -->
            <div id="" class="P3_msn-messenger-remote-user" data-vide="" value="" name="">
              <div id="" class="P3_container" data-vide="" value="" name="">
                <div id="" class="P3_msn-messenger-history-chat" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <div id="" class="P3_subject" data-vide="" value="" name=""></div>
                    <div id="historiqueMess" class="" data-vide="" value="" name="" style="justify-content:left; ">
                      <div id="historiqueMessageRecu" class="" data-vide="" value="" name="" rows="8" cols="30" style="width: 100%; height:100%; border:none; resize: none; ">
                        <div id="messageHistory" class="" data-vide="" value="" name=""></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div id="contenerAvatarDestinataire" class="P3_msn-messenger-avatar P3_image" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="avatarDiscutionDestinataire" class="P3_picture P3_pictureDestinataire" data-vide="" value="" name="" src="../00_general/avatars/msn.png" alt="Avatar">
                  </div>
                </div>
              </div>
            </div>
          <!-- <== PARTIE 01 02 ----------------------------------------------------------------------------------------------------------------------------- <== DESTINATAIRE / HISTORIQUE MESSAGE -->

          <!-- PARTIE 01 03 ==> --------------------------------------------------------------------------------------------------------------------------------------------------- UTILISATEUR ==> -->
            <div id="" class="P3_msn-messenger-local-user" data-vide="" value="" name="">
              <div id="" class="P3_actionbar" data-vide="" value="" name="">
                <div id="" class="P3_simple-button P3_letter" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/letter.png" alt="ecrire">
                    <span></span>
                  </div>
                </div>
                <div id="" class="P3_simple-button happy" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/happy.png" alt="smiley">
                    <span></span>
                    <button id="" class="P3_downEmoji" data-vide="" value="" name="">⯆</button>
                  </div>
                </div>
                <div id="" class="P3_simple-button P3_voice-clip" data-vide="" value="" name="" label="Voice clip">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/voice-clip.png" alt="son">
                    <button id="envoyerSon" class="P3_downsound" data-vide="" value="" name="">⯆</button>
                  </div>
                </div>
                <div id="blagueChuckNorris" class="P3_simple-button P3_wink" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/chuckNorris.png" alt="smiley2" style="">
                    <span></span>
                  </div>
                </div>
                <div id="" class="P3_simple-button P3_mountain" data-vide="" value="" name="" arrow>
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/mountain.png" alt="photo">
                    <span></span>
                    <button id="" class="P3_down P3_downimage" data-vide="" value="" name="">⯆</button>
                  </div>
                </div>
                <div id="" class="P3_simple-button P3_gift" data-vide="" value="" name="" arrow>
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" style="height: 23px; width:23px;" src="../bibliotheque/03_discution/icones/gifs.png" alt="cadeaux">
                    <span></span>
                    <button id="" class="P3_downgift" data-vide="" value="" name="">⯆</button>
                  </div>
                </div>

                <div id="P3_wizz" class="P3_simple-button P3_nudge" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/nudge.png" alt="wizz"><audio id="shakeSound" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/son/wizz.wav"></audio>
                    <span></span>
                  </div>
                </div>

              </div>
              <div id="" class="P3_chat" data-vide="" value="" name="">
                <div id="classmessageAEnvoye" class="" data-vide="" value="" name="" style="justify-content:left; ">
                  <textarea id="messageAEnvoye" class="" data-vide="" value="" name="" rows="3" cols="30" style="width: 100%; height:100%; border:none;"></textarea>
                </div>
                <div id="blocEnvoyerMessage" class="P3_buttons P3_buttons2" data-vide="" value="" name="">
                  <button id="envoyerMessage" class="P3_normal" data-vide="" value="" name="">Envoyer</button>
                </div>
              </div>
              <div id="" class="P3_tabs" data-vide="" value="" name="">
                <div id="" class="P3_tab-button P3_paint" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/paint.png" alt="dessin">
                  </div>
                </div>
                <div id="" class="P3_tab-button P3_letter" data-vide="" value="" name="">
                  <div id="" class="P3_container" data-vide="" value="" name="">
                    <img id="" class="" data-vide="" value="" name="" src="../bibliotheque/03_discution/icones/letter.png" alt="lettre">
                  </div>
                </div>
              </div>
              <div id="contenerAvatarUtilisateur" class="P3_msn-messenger-avatar P3_duck" data-vide="" value="" name="">
                <div id="" class="P3_container" data-vide="" value="" name="">
                  <img id="avatarDiscutionUtilisateur" class="P3_picture" data-vide="" value="" name="" src="" alt="Avatar"><!-- ../00_general/avatars/msn.png -->
                </div>
              </div> 
            </div>
          <!-- <== PARTIE 01 03 --------------------------------------------------------------------------------------------------------------------------------------------------- <== UTILISATEUR -->

          <!-- PARTIE 01 04 ==> -------------------------------------------------------------------------------------------------------------------------------------------------- PIED DE PAGE ==> -->
            <div id="" class="P3_msn-messenger-statusbar" data-vide="" value="" name="">
              <div id="" class="P3_container" data-vide="" value="" name="">
                <div id="" class="P3_text" data-vide="" value="" name="" style="margin-left:10px;"></div>
                <img id="" class="" data-vide="" value="" name="" style="height:35px;" src="../bibliotheque/03_discution/icones/GIPHY_logo.png" alt="GIPHY">
                <img id="" class="" data-vide="" value="" name="" style="height:35px;margin-left:10px;" src="../bibliotheque/03_discution/icones/chuckNorris_IO.png" alt="GIPHY">
              </div>
            </div>
          <!-- <== PARTIE 01 04 -------------------------------------------------------------------------------------------------------------------------------------------------- <== PIED DE PAGE -->

          </div>
          <div id="" class="P3_border-window" data-vide="" value="" name=""></div>
        </div>
      </div>
    </div>
  <!-- <== PARTIE 01 --------------------------------------------------------------------------------------------------------------------------------------------------------------------- <== CORP -->


<?php

?>





  <script>
  $(document).ready(function() {
  //buttonP3Sound = $('#envoyerSon');    
  let bubbleContainers;
  const buttonP3Image = document.querySelector('.P3_downimage');
  //$('.P3_voice-clip');
  buttonP3Image.addEventListener('click', function (event) {
        // Supprimer la bulle si elle existe déjà
        if (bubbleContainers) {
            bubbleContainers.remove();
            bubbleContainers = null;
            return;
        }

        // Créer la bulle cliquable
        bubbleContainers = document.createElement('div');
        bubbleContainers.classList.add('bubbles-containers');

        // Positionner la bulle cliquable juste en dessous du bouton
        const buttonRecta = buttonP3Image.getBoundingClientRect();
        bubbleContainers.style.top = buttonRecta.bottom + 'px';
        bubbleContainers.style.left = buttonRecta.left + 'px';
        
        // En-tête "envoyer GIF"
        const headers = document.createElement('div');
        headers.classList.add('headers');
        headers.innerHTML = 
        `<form id="uploadForm" action="03_discution/dynamique/upload.php" method="post" enctype="multipart/form-data">
          <div class="file-upload">
            <input id="inputFile" type="file" name="photo" accept="image/jpg, image/jpeg, image/png, image/gif" required>
          </div>
          <input id="nomDeLaPhot" name="photoNomUtilisateur" required placeholder="donne un nom a ton image">
          <button id="bouttonphoto" type="submit" name="photoACharger">Ajouter la photo</button>
        </form>`;
        bubbleContainers.appendChild(headers);
        // Ajouter la bulle cliquable à la page
        document.body.appendChild(bubbleContainers);

        // Gestionnaire d'événements pour fermer la bulle si l'utilisateur clique ailleurs
        document.addEventListener('click', function (event) {
            if (!bubbleContainers.contains(event.target) && event.target !== buttonP3Image) {
                bubbleContainers.remove();
                bubbleContainers = null;
            }
        });
    });

    $('#uploadForm').submit(function(event) {// Ajout d'un gestionnaire d'événement pour détecter le changement de fichier sélectionné
      $('#inputFile').on('change', function() {
          // Accès aux fichiers sélectionnés
          var files = input.files;

          // Vérifier s'il y a des fichiers sélectionnés
          if (files.length > 0) {
              // Accéder à la taille du premier fichier sélectionné
              var taillePremierFichier = files[0].size;
              if (taillePremierFichier<=5000000) {

                event.preventDefault(); // Empêcher le formulaire de se soumettre normalement
                  var formData = new FormData(this);

                  $.ajax({
                      url: $(this).attr('action'),
                      type: 'POST',
                      data: formData,
                      processData: false,
                      contentType: false,
                      success: function(response) {
                          $('#message').html(response); // Afficher le message de succès ou d'erreur
                      },
                      error: function(xhr, status, error) {
                          console.error('Erreur lors de l\'envoi du fichier : ', error);

                      }
                    });
                statutEnvoi="Accepté";
              }else{
                statutEnvoi="Refusé";
              }
              console.log("Taille du premier fichier sélectionné : " + taillePremierFichier + " octets : il est donc : " + statutEnvoi);
          }
      });
    });

          $('#P1_app__login-button').on('click', function(){
          
            const logSaisiePseudo=$('#saisiePseudo').val();

            ajax_conontenuDynamiqueContact(logSaisiePseudo);

            function ajax_conontenuDynamiqueContact(logSaisiePseudo) {
              $.ajax({
                method: "POST",
                url: "02_listedeconnectes/fonctionnement/listeDifferentsTypeContacts.php",
                data: { logSaisiePseudo: logSaisiePseudo},
              })
              .done(function (retour3_html) {
                //console.log(retour3_html);
                $('#contenuDynamiqueListeContact').html(retour3_html);
                $('#P2_bouttonboutton').click();
              })
              .fail(function () {
                alert("error dans ajax_conontenuDynamiqueContact");
              });
            };

          });

        });

function updateCustomProperty() {
  document.documentElement.style.setProperty('--largueur_fenetre', window.innerWidth);
      document.documentElement.style.setProperty('--hauteur_fenetre', window.innerHeight);
    }

// Mettre à jour la variable CSS personnalisée lors du chargement de la page
window.addEventListener('load', updateCustomProperty);

// Mettre à jour la variable CSS personnalisée lors du redimensionnement de la fenêtre
window.addEventListener('resize', updateCustomProperty);

</script>










<?php include "dynamique/historiqueMessage.php"; ?>


  <!-- PARTIE 02 ==> -------------------------------------------------------------------------------------------------------------------------------------------------------------------- LIENS ==> -->
      <!-- API -->
        <script src="../03_discution/API/API_GIF.js"></script><!-- API pour le choix des GIF -->
        <script src="../03_discution/API/api_chuckNorris.js"></script><!-- API d'envoi de memes sur CHuck Norris -->

      <!-- fonctionnement -->
        <script src="../bibliotheque/03_discution/emoji-en-US.json"></script><!-- bibliothe interne de selection/envoi d'emoji -->
        <script src="../03_discution/fonctionnement/emoji-en-US.js"></script><!-- bibliothe interne de selection/envoi d'emoji -->
        <script src="../03_discution/fonctionnement/script_discution.js"></script><!-- divers scripts utile a cette page -->
        <!-- <script src="03_discution/dynamique/historiqueMessage.js" ></script>-->
      <!-- Dynamique -->
        <script src="../03_discution/fonctionnement/script_historiqueMessages.js"></script> <!-- divers scripts utile a cette page -->

      <!-- Style --> 
        <link rel="stylesheet" type="text/css" href="../03_discution/styles/style_discution.css"><!-- feuille de style utilise pour cette page -->
         <!--<link  href="../03_discution/fonctionnement/script_discution.php">--><!-- feuille de style utilise pour cette page -->

      <!-- Animation -->
        <!-- Pas de fichier(s) pour cette partie -->
  <!-- <== PARTIE 02 -------------------------------------------------------------------------------------------------------------------------------------------------------------------- <== LIENS -->
